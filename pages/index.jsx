import { NextSeo } from "next-seo";
import Layout from "../components/layout";
import Hero from "../components/hero-bg-image";
import PageHeader from "../components/page-header";
import { DepartmentGrid } from "../components/department-grid";
import { getAllArticles } from "../lib/Articles";
import { pdsConfig } from "../pds.config";

export default function Home({ articles }) {
  return (
    <Layout>
      <NextSeo
        title={pdsConfig.siteName}
        description="Generated by Pantheon Content Cloud"
      />
      <Hero title="Pantheon Content Cloud for Gov" />

      <PageHeader title="Municipality Services and Departments" />
      <section>
        <DepartmentGrid articles={articles} headingLevel="h2" />
      </section>
    </Layout>
  );
}

export async function getServerSideProps() {
  const articles = await getAllArticles({}, {tagContains: "", titleContains: "", bodyContains: ""});
  return {
    props: {
      articles,
    },
  };
}
